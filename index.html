<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>skinfracture</title>
<style>
body {
  margin:0; padding:0;
  background:#0a0a0a;
  font-family:'Courier New', monospace;
  overflow:hidden;
  height:100vh;
  color:#fff;
  transition: background 0.1s;
}
#startScreen {
  position:absolute; top:0; left:0;
  width:100%; height:100%;
  background:#111;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  font-size:2em;
  z-index:300;
}
#startScreen button {
  padding:15px 30px;
  font-size:1em;
  margin-top:20px;
  cursor:pointer;
  background:#444; color:#fff; border:none; border-radius:10px;
}
.character { position:absolute; width:120px; cursor:pointer; transition: transform 0.2s; z-index:100;}
.character:hover { transform: scale(1.2); }
#dialogue {
  position:fixed; bottom:20px; left:50%; transform:translateX(-50%);
  background:rgba(20,20,20,0.95); padding:15px 20px;
  border-radius:10px; max-width:500px; display:none; z-index:100;
}
.choice-btn {
  display:block; margin:5px 0; padding:5px 10px;
  background:#444; border:none; color:#fff; cursor:pointer; border-radius:5px;
}
.choice-btn:hover { background:#666; }
.eye { position:absolute; width:80px; height:80px; pointer-events:none; transition: transform 0.05s linear; opacity:0.9; z-index:50;}
#follower { position:absolute; width:80px; height:80px; pointer-events:none; transition: transform 0.05s linear; z-index:90;}
#pixelCanvas { position:absolute; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:1;}
#endingScreen {
  display:none; position:absolute; top:0; left:0; width:100%; height:100%;
  background-size:cover; background-position:center; z-index:200;
  display:flex; justify-content:center; align-items:center; flex-direction:column;
  color:#ff6666; font-size:3em; text-shadow: 2px 2px 5px #000;
}
#drawCanvas {
  display:none; position:absolute; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.8); z-index:150; cursor:crosshair;
}
</style>
</head>
<body>

<!-- ì‹œì‘ í™”ë©´ -->
<div id="startScreen">
  ê¸°ê´´í•œ ì„¸ê³„ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì‹œì‘í•˜ì‹œê² ìŠµë‹ˆê¹Œ?
  <button id="startBtn">ì˜ˆ</button>
</div>

<!-- ìºë¦­í„° -->
<img src="https://i.pinimg.com/originals/be/b5/ea/beb5ea94a69fe47b9c11e8be471fa358.jpg" class="character" id="skinfracture" style="top:100px; left:200px;" alt="ìŠ¤í‚¨í”„ë™ì³">

<div id="dialogue"></div>

<!-- ëˆˆ ì´ë¯¸ì§€ -->
<img src="https://th.bing.com/th/id/OIP.wVayDMkk0NSwQOoBIFRzFgHaGS?w=203&h=180&c=7&r=0&o=7&pid=1.7&rm=3" class="eye">
<img src="https://th.bing.com/th/id/OIP.NFX33A1fNG5thwfx9LrjuwHaEr?w=277&h=180&c=7&r=0&o=7&pid=1.7&rm=3" class="eye">

<!-- ë§ˆìš°ìŠ¤ ë”°ë¼ë‹¤ë‹ˆëŠ” í« -->
<img id="follower" src="https://th.bing.com/th/id/OIP.hO7yEvdPMrjCawk5lJoBLwHaIK?w=159&h=180&c=7&r=0&o=7&pid=1.7&rm=3">

<!-- í”½ì…€ ìº”ë²„ìŠ¤ -->
<canvas id="pixelCanvas"></canvas>

<!-- ê·¸ë¦¼íŒ ìº”ë²„ìŠ¤ -->
<canvas id="drawCanvas"></canvas>

<!-- ì—”ë”© í™”ë©´ -->
<div id="endingScreen" style="background-image:url('https://i.pinimg.com/736x/48/e8/78/48e878c8235324ce7c4bbbb310253889.jpg');">
  ë‹¹ì‹ ì˜ ì¸ìƒì€ ì•ˆë…•í•œê°€?
</div>

<script>
const startBtn = document.getElementById('startBtn');
const startScreen = document.getElementById('startScreen');
const dialogue = document.getElementById('dialogue');
const eyes = document.querySelectorAll('.eye');
const follower = document.getElementById('follower');
const endingScreen = document.getElementById('endingScreen');
const drawCanvas = document.getElementById('drawCanvas');
const drawCtx = drawCanvas.getContext('2d');
drawCanvas.width = window.innerWidth; drawCanvas.height = window.innerHeight;
const pixelCanvas = document.getElementById('pixelCanvas');
const pixelCtx = pixelCanvas.getContext('2d');
pixelCanvas.width = window.innerWidth; pixelCanvas.height = window.innerHeight;

// ğŸ”¹ ìŠ¤í† ë¦¬ JSON
const story = {
  skinfracture:{text:"ë‚˜ëŠ” ìŠ¤í‚¨í”„ë™ì³ì•¼. ì˜¤ëŠ˜ ê¸°ê´´í•œ ëª¨í—˜ì„ í• ë˜?", choices:[
    {text:"ì‘, ì‹œì‘í•˜ì", next:"adventure1"},
    {text:"ê·¸ë¦¼ ê·¸ë ¤ì£¼ê³  ì‹¶ë‹¤", next:"drawStory"},
    {text:"ì¡°ê¸ˆ ë¬´ì„œì›Œ", next:"scared1"}
  ]},
  adventure1:{text:"ì¢‹ì•„! ë°© ì•ˆì— ëˆˆë“¤ì´ ë„ˆë¥¼ ì§€ì¼œë³´ê³  ìˆì–´. ë¬´ì—‡ì„ í• ë˜?", choices:[
    {text:"ëˆˆì—ê²Œ ë§ì„ ê±¸ì–´ë³¸ë‹¤", next:"talkEyes"},
    {text:"ëª¨í—˜ ê³„ì†", next:"deepAdventure"},
    {text:"ëŒì•„ê°„ë‹¤", next:"endStory"}
  ]},
  drawStory:{text:"ì¢‹ì•„! ìŠ¤í‚¨í”„ë™ì³ì—ê²Œ ê·¸ë¦¼ì„ ê·¸ë ¤ì¤˜.", choices:[
    {text:"ê·¸ë¦¼ ê·¸ë¦¬ê¸° ì‹œì‘", next:"drawCanvasScreen"}
  ]},
  drawCanvasScreen:{text:"", choices:[]},
  scared1:{text:"í¥, ë¬´ì„œì›Œí•  ì¤„ ì•Œì•˜ì–´.", choices:[
    {text:"ë‹¤ì‹œ ìš©ê¸°ë‚´ê¸°", next:"adventure1"},
    {text:"ë„ë§ê°€ê¸°", next:"endStory"}
  ]},
  talkEyes:{text:"ëˆˆë“¤ì´ ê¹œë¹¡ì´ë©° ëŒ€ë‹µì„ í•œë‹¤â€¦ â€œì–´ì„œ ì™€â€", choices:[
    {text:"ë” ê¹Šì´ ë“¤ì–´ê°„ë‹¤", next:"deepAdventure"},
    {text:"ë‚˜ê°€ê¸°", next:"endStory"}
  ]},
  deepAdventure:{text:"ë°© ì•ˆì´ ì ì  ì–´ë‘ì›Œì§€ê³ , ê¸°ê´´í•œ ê·¸ë¦¼ìê°€ ë„ˆë¥¼ ê°ì‹¼ë‹¤.", choices:[
    {text:"ê³„ì† ì „ì§„", next:"endStory"},
    {text:"ë’¤ë¡œ ëŒì•„ê°„ë‹¤", next:"endStory"}
  ]},
  endStory:{text:"", choices:[]}
};

// ğŸ”¹ ì´ë²¤íŠ¸
startBtn.onclick = ()=>{
  startScreen.style.display="none";
  startGame();
};

function startGame(){
  document.getElementById('skinfracture').style.display="block";
  dialogue.style.display="block";
  startStory('skinfracture');
}

// ğŸ”¹ ìŠ¤í† ë¦¬ ì§„í–‰
function startStory(key){
  if(key==="endStory"){
    dialogue.style.display="none";
    drawCanvas.style.display="none";
    endingScreen.style.display="flex";
    return;
  }
  if(key==="drawCanvasScreen"){
    dialogue.style.display="none";
    drawCanvas.style.display="block";
    enableDrawing();
    return;
  }
  const node = story[key];
  dialogue.innerHTML = node.text+"<br>";
  node.choices.forEach(c=>{
    const btn = document.createElement('button');
    btn.classList.add('choice-btn');
    btn.innerText = c.text;
    btn.onclick = ()=>{ dialogue.innerHTML=""; startStory(c.next);}
    dialogue.appendChild(btn);
  });
}

// ğŸ”¹ ë§ˆìš°ìŠ¤ ë”°ë¼ë‹¤ë‹ˆëŠ” í« + ëˆˆ
document.addEventListener('mousemove',(e)=>{
  follower.style.transform = `translate(${e.clientX-40}px, ${e.clientY-40}px)`;
  eyes.forEach(eye=>{
    const rect = eye.getBoundingClientRect();
    const dx = e.clientX-(rect.left+rect.width/2);
    const dy = e.clientY-(rect.top+rect.height/2);
    eye.style.transform = `translate(${dx*0.1}px, ${dy*0.1}px)`;
  });
});

// ğŸ”¥ ë¶ˆ ê¹œë¹¡ì„
function flickerLight(){
  const brightness = 0.6 + Math.random()*0.4;
  document.body.style.background = `rgba(10,10,10,${brightness})`;
  setTimeout(flickerLight, 100 + Math.random()*200);
}
flickerLight();

// ğŸ® í”½ì…€ íš¨ê³¼
function drawPixels(){
  pixelCtx.clearRect(0,0,pixelCanvas.width,pixelCanvas.height);
  for(let i=0;i<500;i++){
    const x=Math.random()*pixelCanvas.width;
    const y=Math.random()*pixelCanvas.height;
    const size=Math.random()*2+1;
    const color=`rgba(${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},${Math.floor(Math.random()*255)},0.5)`;
    pixelCtx.fillStyle=color;
    pixelCtx.fillRect(x,y,size,size);
  }
  requestAnimationFrame(drawPixels);
}
drawPixels();

// ğŸ¨ ê·¸ë¦¼íŒ
function enableDrawing(){
  let painting=false;
  drawCanvas.addEventListener('mousedown',e=>{painting=true; drawCtx.beginPath(); drawCtx.moveTo(e.clientX,e.clientY);});
  drawCanvas.addEventListener('mouseup',e=>{painting=false;});
  drawCanvas.addEventListener('mousemove',e=>{if(!painting) return; drawCtx.strokeStyle='white'; drawCtx.lineWidth=4; drawCtx.lineTo(e.clientX,e.clientY); drawCtx.stroke();});
  drawCanvas.addEventListener('dblclick',()=>{ drawCanvas.style.display="none"; startStory('endStory'); });
}
</script>
</body>
</html>
