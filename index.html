<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Skin Fracture Ultimate</title>
<style>
body {
    margin: 0;
    overflow: hidden;
    background: #0a0a0a;
    font-family: monospace;
}

.skinfracture {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 200px;
    height: 200px;
    transition: transform 0.05s;
}

.skinfracture img {
    width: 100%;
    height: 100%;
    pointer-events: none;
}

.eye {
  width: 10px;
  height: 6px;
  border-radius: 50% / 50%;
  background: radial-gradient(circle at 30% 30%, #fff, #ccc);
  border: 1px solid black;
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 1px;
}

.blood {
    position: absolute;
    width: 5px;
    height: 5px;
    background: red;
    border-radius: 50%;
    animation: drip 1s linear forwards;
}

@keyframes drip {
    0% { transform: translate(0, 0); opacity: 1; }
    100% { transform: translate(0, 200px) rotate(360deg); opacity: 0; }
}

/* 장난감 픽셀 */
.toy {
    position: absolute;
    width: 30px;
    height: 30px;
    background: yellow;
    border: 2px solid #fff;
    border-radius: 4px;
    animation: toyMove 5s linear infinite;
}

@keyframes toyMove {
    0% { transform: translateX(0) translateY(0); }
    50% { transform: translateX(300px) translateY(200px); }
    100% { transform: translateX(0) translateY(0); }
}

/* 화면 흔들림 */
.screenShake {
    animation: shake 0.2s;
}

@keyframes shake {
    0% { transform: translate(0px,0px); }
    25% { transform: translate(5px,-5px); }
    50% { transform: translate(-5px,5px); }
    75% { transform: translate(5px,5px); }
    100% { transform: translate(0px,0px); }
}
</style>
</head>
<body>

<div class="skinfracture" id="skinfracture">
    <img src="/mnt/data/f8a14cb4-0928-4bba-ab64-6be5e8039ace.png" alt="Skin Fracture"/>
</div>

<script>
const skin = document.getElementById('skinfracture');

// 마우스 따라 스킨 회전 + 피 폭발
document.addEventListener('mousemove', (e) => {
    const rect = skin.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;

    const deltaX = (e.clientX - centerX) / 20;
    const deltaY = (e.clientY - centerY) / 20;

    skin.style.transform = `translate(-50%, -50%) rotateX(${deltaY}deg) rotateY(${deltaX}deg)`;

    if (Math.random() > 0.7) {
        const blood = document.createElement('div');
        blood.className = 'blood';
        blood.style.left = `${e.clientX}px`;
        blood.style.top = `${e.clientY}px`;
        document.body.appendChild(blood);
        setTimeout(() => blood.remove(), 1000);
    }
});

// 화면 눈 생성
const eyeCount = 70;
const eyes = [];
for(let i=0;i<eyeCount;i++){
  const eye=document.createElement('div');
  eye.className='eye';
  const pupil=document.createElement('div');
  pupil.className='pupil';
  eye.appendChild(pupil);
  eye.style.top=Math.random()*window.innerHeight+'px';
  eye.style.left=Math.random()*window.innerWidth+'px';
  document.body.appendChild(eye);
  eyes.push({eye,pupil});
}

// 장난감 픽셀 생성
function spawnToy() {
    const toy = document.createElement('div');
    toy.className = 'toy';
    toy.style.left = `${Math.random() * window.innerWidth}px`;
    toy.style.top = `${Math.random() * window.innerHeight}px`;
    document.body.appendChild(toy);

    // 충돌 감지 시 피 폭발 + 화면 흔들림
    const interval = setInterval(() => {
        const toyRect = toy.getBoundingClientRect();
        const skinRect = skin.getBoundingClientRect();
        if (
            toyRect.left < skinRect.right &&
            toyRect.right > skinRect.left &&
            toyRect.top < skinRect.bottom &&
            toyRect.bottom > skinRect.top
        ) {
            document.body.classList.add('screenShake');
            setTimeout(() => document.body.classList.remove('screenShake'), 200);

            for (let i = 0; i < 10; i++) {
                const blood = document.createElement('div');
                blood.className = 'blood';
                blood.style.left = `${skinRect.left + Math.random() * skinRect.width}px`;
                blood.style.top = `${skinRect.top + Math.random() * skinRect.height}px`;
                document.body.appendChild(blood);
                setTimeout(() => blood.remove(), 1000);
            }

            toy.remove();
            clearInterval(interval);
            spawnToy(); // 새 장난감 생성
        }
    }, 50);
}

// 처음 장난감 여러 개 생성
for (let i = 0; i < 5; i++) spawnToy();
</script>

</body>
</html>
